/*! its3.0 2015-08-12 */
function CYMap(a){this.mapId=a,this.map=null,this.controls=null,this.initMap()}function SetMeasureStyle(){sketchSymbolizers={Point:{pointRadius:4,graphicName:"square",fillColor:"white",fillOpacity:1,strokeWidth:1,strokeOpacity:1,strokeColor:"#333333"},Line:{strokeWidth:2,strokeOpacity:1,strokeColor:"#666666",strokeDashstyle:"solid"},Polygon:{strokeWidth:2,strokeOpacity:1,strokeColor:"#666666",fillColor:"white",fillOpacity:.3}};var a=new OpenLayers.Style;a.addRules([new OpenLayers.Rule({symbolizer:sketchSymbolizers})]);var b=new OpenLayers.StyleMap({"default":a}),c={title:"测量距离",handlerOptions:{style:"default",layerOptions:{styleMap:b},persist:!0}};return c}function lon2mercator(a){return 20037508.34*a/180}function lat2mercator(a){var b=Math.log(Math.tan((90+a)*Math.PI/360))/(Math.PI/180);return 20037508.34*b/180}var mapTileUrl="http://192.168.10.144/chishui/",mapTileLeftLon=105.563460244141,mapTileBottomLat=28.4634176718798,mapTileRightLon=105.838118447266,mapTileTopLat=28.7046038137659,mapTileMinLevel=10,mapTileMaxLevel=17,firstLeftLon=105.59333,firstBottomLat=28.57996,firstRightLon=105.80928,firstTopLat=28.70621,resolution=156543.033928;CYMap.prototype.initMap=function(){for(var a=[],b=mapTileMinLevel;mapTileMaxLevel>=b;b++)a.push(resolution/Math.pow(2,b));this.map=new OpenLayers.Map(this.mapId,{projection:"EPSG:900913",displayProjection:"EPSG:4326",maxExtent:new OpenLayers.Bounds(lon2mercator(mapTileLeftLon),lat2mercator(mapTileBottomLat),lon2mercator(mapTileRightLon),lat2mercator(mapTileTopLat)),resolutions:a,controls:[]}),layer=new OpenLayers.Layer.LocalGoogleMap("baselayer",mapTileUrl),this.map.addLayer(layer),this.map.addControl(new OpenLayers.Control.Navigation),this.map.addControl(new OpenLayers.Control.MousePosition({displayClass:"mousePositionCss"})),this.map.addControl(new OpenLayers.Control.PanZoomBar({zoomWorldIcon:!0}));var c=SetMeasureStyle();controls={zbIn:new OpenLayers.Control.ZoomBox,zbOut:new OpenLayers.Control.ZoomBox({out:!0}),dragMap:new OpenLayers.Control.DragPan,measureLength:new OpenLayers.Control.Measure(OpenLayers.Handler.Path,c)};for(var d in this.controls)this.map.addControl(this.controls[d]);this.map.zoomToExtent(new OpenLayers.Bounds(lon2mercator(firstLeftLon),lat2mercator(firstBottomLat),lon2mercator(firstRightLon),lat2mercator(firstTopLat)),!0)};