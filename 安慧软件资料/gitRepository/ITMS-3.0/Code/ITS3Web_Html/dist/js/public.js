/*! its3.0 2015-08-12 */
function User(a){var b=a.IsOK,c=a.Token,d=a.UserName,e=a.Privelige;this.IsOK=function(){return b},this.Token=function(){return c},this.UserName=function(){return d},this.Privelige=function(){return e}}function initHtml(a){for(var b,c=$("<div id='vehNumberCookie' class='table'></div>"),d=0;d<a.length;d++){d%9===0&&(b=$("<div class='tr'></div>"),c.append(b));var e=$("<div class='td'></div>").appendTo(b);if(a[d])if(e.data("vehNumberData",a[d]).text(a[d].text),9>d)e.css("backgroundColor","#FFE038");else switch(a[d].type){case"1":e.css("backgroundColor","#ACF5FF");break;case"2":e.css("backgroundColor","#EEEEEE");break;case"3":e.css("backgroundColor","#A0C1FF")}else e.data("vehNumberData",null),e.css("backgroundColor","#FFE038")}$("body").append(c).mousedown(function(a){var b=$("#vehNumberCookie");(a.clientX<b.offset().left||a.clientX>b.offset().left+b.outerWidth()||a.clientY<b.offset().top||a.clientY>b.offset().top+b.outerHeight())&&$("#vehNumberCookie").hide()}),c.click(function(a){var b=$(a.target).data("vehNumberData");if(null===b)return!1;if(b){var c=$(this).data("vehNumber");switch(b.type){case"1":c.setHead(b.value);break;case"2":c.setHead(b.value);break;case"3":c.setTail(b.value)}$("#vehNumberCookie").hide();for(var d=0;9>d;d++)if(vehNumberData[d]&&vehNumberData[d].value==b.value)return!1;var e=$(this).find(".tr").eq(0),f=e.find(".td");vehNumberData.splice(8,1),vehNumberData.splice(0,0,b),f.eq(8).data("vehNumberData",b),f.eq(8).text(b.value),e.prepend(f.eq(8)),localStorage.setItem("vehNumberData",JSON.stringify(vehNumberData))}})}function isIE(){return explorer.indexOf("MSIE")>=0}function isFF(){return explorer.indexOf("Firefox")>=0}function isCH(){return explorer.indexOf("Chrome")>=0}function isOP(){return explorer.indexOf("Opera")>=0}function isSA(){return explorer.indexOf("Safari")>=0}$.fn.extend({getParams:function(){var a=this.serializeArray(),b={};if(a&&a.length>0)for(var c in a)b[a[c].name]=a[c].value;return b}}),$.fn.layout.defaults.fit=!0,$.fn.dialog.defaults.cache=!1,$.extend($.fn.datagrid.defaults,{border:!1,pagination:!0,pageSize:15,pageList:[15,30,45,60],checkOnSelect:!1,selectOnCheck:!1,singleSelect:!0,striped:!0,fit:!0,fitColumns:!0,scrollbarSize:20}),$.extend($.fn.combobox.defaults,{panelHeight:null,panelMinHeight:22,panelMaxHeight:200,prompt:"请选择"}),$.extend($.fn.dialog.defaults,{modal:!0}),$.extend($.fn.combotree.defaults,{panelHeight:null,panelWidth:null,panelMinHeight:22,panelMaxHeight:200,panelMinWidth:200,panelMaxWidth:300,prompt:"请选择"}),$.fn.menubutton.defaults.plain=!1,$.fn.splitbutton.defaults.plain=!1,Date.prototype.format=function(a){var b={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var c in b)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a};var vehNumberData;$(function(){var a=localStorage.getItem("vehNumberData");a?vehNumberData=$.parseJSON(a):(vehNumberData=[null,null,null,null,null,null,null,null,null,{text:"京",value:"京",type:"1"},{text:"津",value:"津",type:"1"},{text:"冀",value:"冀",type:"1"},{text:"晋",value:"晋",type:"1"},{text:"蒙",value:"蒙",type:"1"},{text:"辽",value:"辽",type:"1"},{text:"吉",value:"吉",type:"1"},{text:"黑",value:"黑",type:"1"},{text:"警",value:"警",type:"3"},{text:"沪",value:"沪",type:"1"},{text:"苏",value:"苏",type:"1"},{text:"浙",value:"浙",type:"1"},{text:"皖",value:"皖",type:"1"},{text:"闽",value:"闽",type:"1"},{text:"赣",value:"赣",type:"1"},{text:"鲁",value:"鲁",type:"1"},{text:"军",value:"军",type:"2"},{text:"学",value:"学",type:"3"},{text:"豫",value:"豫",type:"1"},{text:"鄂",value:"鄂",type:"1"},{text:"湘",value:"湘",type:"1"},{text:"粤",value:"粤",type:"1"},{text:"桂",value:"桂",type:"1"},{text:"琼",value:"琼",type:"1"},{text:"总",value:"总",type:"2"},{text:"空",value:"空",type:"2"},{text:"挂",value:"挂",type:"3"},{text:"渝",value:"渝",type:"1"},{text:"川",value:"川",type:"1"},{text:"贵",value:"贵",type:"1"},{text:"云",value:"云",type:"1"},{text:"藏",value:"藏",type:"1"},{text:"海",value:"海",type:"2"},{text:"泡",value:"泡",type:"2"},{text:"武",value:"WJ",type:"2"},{text:"使",value:"使",type:"3"},{text:"陕",value:"陕",type:"1"},{text:"甘",value:"甘",type:"1"},{text:"青",value:"青",type:"1"},{text:"宁",value:"宁",type:"1"},{text:"新",value:"新",type:"1"},{text:"港",value:"港",type:"1"},{text:"澳",value:"澳",type:"1"},{text:"台",value:"台",type:"1"},{text:"领",value:"领",type:"3"}],localStorage.setItem("vehNumberData",JSON.stringify(vehNumberData))),initHtml(vehNumberData)});var VehNumber=function(a){this.textBox=a,this.init()};VehNumber.prototype={textBox:null,head:"",no:"",tail:"",init:function(){var a=this.textBox.textbox("getText");this.no=a,this.handleHead(a),this.handleTail(a)},getVehNumber:function(){return this.head+this.no+this.tail},setHead:function(a){this.head=a,this.textBox.textbox("setValue",this.getVehNumber()),this.textBox.textbox("textbox").focus().get(0).selectionStart=100},setTail:function(a){this.tail=a,this.textBox.textbox("setValue",this.getVehNumber()),this.textBox.textbox("textbox").focus().get(0).selectionStart=100},handleHead:function(a){this.head="";for(var b=0;b<vehNumberData.length;b++)if(vehNumberData[b]&&a.startWith(vehNumberData[b].value)&&"3"!=vehNumberData[b].type){this.head=vehNumberData[b].value,this.no=a.substring(this.head.length);break}},handleTail:function(a){this.tail="";for(var b=0;b<vehNumberData.length;b++)if(vehNumberData[b]&&a.endWith(vehNumberData[b].value)&&"3"==vehNumberData[b].type){this.tail=vehNumberData[b].value,this.no=a.substring(a.lastIndexOf(this.tail),this.tail.length);break}}},String.prototype.startWith=function(a){var b=new RegExp("^"+a);return b.test(this)},String.prototype.endWith=function(a){var b=new RegExp(a+"$");return b.test(this)};var explorer=window.navigator.userAgent,Monitor=function(a){this.options={target:null,onClose:function(){},onStop:function(){},onStart:function(){}},$.extend(this.options,a),this.target=this.options.target,this.init()};Monitor.prototype={options:null,target:null,count:0,monitors:{},currentWidth:0,currentHeight:0,mode:0,largePanel:null,scrollPanel:null,init:function(){this.monitors={},this.currentWidth=0,this.currentHeight=0,mode=0,this.target.css({overflow:"hidden"}),this._initMaxMode()},_initMaxMode:function(){this.largePanel=$("<div class='largePanelInner'></div>"),this.scrollPanel=$("<div class='scrollPanelInner'></div>"),this.target.append(this.largePanel).append(this.scrollPanel),this.largePanel.panel({cls:"largePanel",width:"70%",height:"100%",border:!1,closed:!0}),this.scrollPanel.panel({cls:"scrollPanel",width:"30%",height:"100%",border:!1,closed:!0})},_fitMonitor:function(a,b){1==b&&this._changeMonitorSize("100%","100%"),2==b&&this._changeMonitorSize("50%","100%"),(2==a&&3==b||5==a&&4==b)&&this._changeMonitorSize("50%","50%"),(4==a&&5==b||7==a&&6==b)&&this._changeMonitorSize("33.3333%","50%"),(6==a&&7==b||10==a&&9==b)&&this._changeMonitorSize("33.3333%","33.3333%"),(9==a&&10==b||13==a&&12==b)&&this._changeMonitorSize("25%","33.3333%"),12==a&&13==b&&this._changeMonitorSize("25%","25%")},_changeMonitorSize:function(a,b){this.currentWidth=a,this.currentHeight=b;for(var c in this.monitors)this.monitors[c].panel("resize",{width:a,height:b})},_createMonitor:function(a,b){var c=this,d=$("<div class='monitorInter'></div>");return this.target.append(d),d.panel({title:b,closable:!0,cls:"monitorItem",height:c.currentHeight,width:c.currentWidth,tools:[{iconCls:"icon-stop",handler:function(){$(this).hasClass("icon-stop")?(this.title="继续",d.panel("panel").find(".panel-title").css("color","red"),$(this).removeClass("icon-stop").addClass("icon-start"),c.options.onStop(a)):(this.title="暂停",d.panel("panel").find(".panel-title").css("color","green"),$(this).removeClass("icon-start").addClass("icon-stop"),c.options.onStart(a))}},{iconCls:"icon-maximize",handler:function(){$(this).hasClass("icon-maximize")?(this.title="还原",c._maximizeMonitor(a,$(this))):(this.title="最大化",c._restoreMonitor($(this)))}}],onBeforeClose:function(){c.options.onClose(a)}}),d.panel("panel").find(".icon-stop").attr("title","暂停"),d.panel("panel").find(".icon-maximize").attr("title","最大化"),d.panel("panel").find(".panel-tool-close").attr("title","关闭"),d.panel("panel").find(".panel-title").css("color","green"),this.monitors[a]=d,d},_restoreMonitor:function(a){this.mode=0,a.addClass("icon-maximize").removeClass("icon-restore"),this.largePanel.panel("close"),this.scrollPanel.panel("close");var b,c;1==this.count?(b="100%",c="100%"):2==this.count?(b="50%",c="100%"):this.count>=3&&this.count<=4?(b="50%",c="50%"):this.count>=5&&this.count<=6?(b="33.3333%",c="50%"):this.count>=7&&this.count<=9?(b="33.3333%",c="33.3333%"):this.count>=10&&this.count<=12?(b="25%",c="33.3333%"):this.count>=13&&(b="25%",c="25%");var d=0;for(var e in this.monitors)this.target.append(this.monitors[e].panel("panel")),this.monitors[e].panel("resize",{width:b,height:c}),d>=16&&this.monitors[e].panel("close",!0),d++},_maximizeMonitor:function(a,b){if(!(this.count<=1)){this.mode=1,this.target.find(".icon-restore").addClass("icon-maximize").removeClass("icon-restore"),b.addClass("icon-restore").removeClass("icon-maximize");var c=this.getMonitor(a),d=this.largePanel.panel("open").panel("body");d.append(c.panel("panel")),c.panel("resize",{width:"100%",height:"100%"});var e=this.scrollPanel.panel("open").panel("body");for(var f in this.monitors)if(a!=f){var g=this.monitors[f];e.append(g.panel("panel")),g.panel("open").panel("resize",{width:"95%",height:"25%"})}e.scrollTop(0)}},addMonitor:function(a,b){if(!this.getMonitor(a)){var c=this._createMonitor(a,b);0===this.mode?this.count<16?this._fitMonitor(this.count,++this.count):(c.panel("close",!0),this.count++):(this.scrollPanel.panel("body").append(c.panel("panel")),c.panel("resize",{width:"95%",height:"25%"}),this.count++)}},removeMonitor:function(a){var b=this.getMonitor(a);if(b)if(b.panel("destroy"),delete this.monitors[a],0===this.mode)if(this.count>16){var c=0;for(var d in this.monitors)if(15==c++){this.monitors[d].panel("open",!0),this.count--;break}}else this._fitMonitor(this.count,--this.count);else this.count--},getMonitor:function(a){return this.monitors[a]}};var brandData;$(function(){function a(a){for(var b="",c=0;c<a.length;c++){var d=a[c];d>="A"&&"Z">=d&&(b+=d)}return b}$.ajax({url:"data/public/brand.json",dataType:"json",success:function(b){brandData=b;var c=$("<div id='brandbox' class='table'></div>");$("body").append(c).mousedown(function(a){var b=$("#brandbox");(a.clientX<b.offset().left||a.clientX>b.offset().left+b.outerWidth()||a.clientY<b.offset().top||a.clientY>b.offset().top+b.outerHeight())&&b.hide()}),brandData.sort(function(a,b){return a.imgName<b.imgName?-1:1});var d=" ";$.each(brandData,function(){var b=this.name,e=this.imgName,f=e.substring(0,e.lastIndexOf(".")),g=a(f);if(this.searchIndex=[],this.searchIndex.push(g.toLowerCase()),this.searchIndex.push(f.toLowerCase()),g[0]>d){var h=$("<div class='letterItem tr'>"+g[0]+"</div>");c.append(h),d=g[0]}var i=$("<div class='brandItem tr'></div>"),j=$("<div class='brandIcon td'><img class='brandImg' src='themes/default/images/brand/"+e+"'/></div>"),k=$("<div class='brandText td'>"+b+"</div>");c.append(i.append(j).append(k)),i.data("brandData",this),i.click(function(){var a=$(this).data("brandData"),b=c.data("textbox");b.textbox("getValue")!=a.id&&b.textbox("setValue",a.id),c.hide()}).hover(function(){$(this).addClass("brandItem-hover")},function(){$(this).removeClass("brandItem-hover")})}),$(document).keydown(function(a){if(0!==$("#brandbox:visible").length){var b=$("#brandbox").data("selectIndex"),c=$("#brandbox").data("textbox");if("ArrowUp"==a.key){a.preventDefault(),$("#brandbox").children(".brandItem.brandItem-hover:visible").removeClass("brandItem-hover");var d=$("#brandbox").children(".brandItem:visible");0===b?d.eq(0).addClass("brandItem-hover"):d.eq(--b).addClass("brandItem-hover"),$("#brandbox").data("selectIndex",b),c.textbox("textbox").blur();var e=d.eq(b),f=e.data("brandData");c.textbox("getValue")!=f.id&&c.textbox("setValue",f.id);var g=e.position().top;0>g&&$("#brandbox").scrollTop($("#brandbox").scrollTop()+g)}else if("ArrowDown"==a.key){a.preventDefault(),$("#brandbox").children(".brandItem.brandItem-hover:visible").removeClass("brandItem-hover");var d=$("#brandbox").children(".brandItem:visible");b==d.length-1?d.eq(d.length-1).addClass("brandItem-hover"):d.eq(++b).addClass("brandItem-hover"),$("#brandbox").data("selectIndex",b),c.textbox("textbox").blur();var e=d.eq(b),f=e.data("brandData");c.textbox("getValue")!=f.id&&c.textbox("setValue",f.id);var g=e.position().top+e.outerHeight()+$("#brandbox").scrollTop()-$("#brandbox").height()+5;g>0&&$("#brandbox").scrollTop(g)}else"Enter"==a.key&&(a.preventDefault(),$("#brandbox").hide())}})}})});