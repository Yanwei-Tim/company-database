<div id="tollgateConfigMgrDiv" class="easyui-layout"><div data-options="region:'north',border:false" style="width:100%"><form method="post" cy-form="formData"><div class="searchPanel"><div class="panel_title">查询条件</div><div class="table"><div class="tr"><div class="td">机构：</div><div class="td"><input class="easyui-combotree" id="org" name="orgId"></div><div class="td">道路：</div><div class="td"><input class="easyui-combobox" id="road" name="roadId" style="width:120px" data-options="valueField:'roadId',textField:'roadName'"></div><div class="td">点位：</div><div class="td"><input class="easyui-combobox" id="site" name="siteId" data-options="valueField:'siteId',textField:'siteName'"></div><div class="td">使用状态：</div><div class="td"><input class="easyui-combobox" id="deviceUseStatus" name="useStatus" style="width:70px" data-options="valueField:'code',textField:'name'"></div><div class="td">厂家：</div><div class="td"><input class="easyui-combobox" id="contractor" name="contractor" style="width:120px" data-options="valueField:'id',textField:'name'"></div><div class="td"><a class="easyui-linkbutton button-search" cy-click="searchData" data-options="iconCls:'icon-search',plain:true">查询</a></div></div></div></div></form><div class="linkbutton_toolbar"><a class="easyui-linkbutton button-add" cy-click="addData" data-options="iconCls:'icon-add',plain:true">新增</a> <a href="#" class="easyui-linkbutton button-enable" data-options="iconCls:'icon-enable',plain:true" cy-click="startUse">启用</a> <a href="#" class="easyui-linkbutton button-disable" data-options="iconCls:'icon-disable',plain:true" cy-click="stopUse">停用</a> <a href="#" class="easyui-linkbutton button-drop" data-options="iconCls:'icon-drop',plain:true" cy-click="destroyUse">报废</a> <a href="#" class="easyui-linkbutton button-remove" data-options="iconCls:'icon-remove',plain:true" cy-click="deleteTollgate">删除</a> <a href="#" class="easyui-linkbutton button" data-options="iconCls:'icon-import',plain:true">导入</a> <a href="#" class="easyui-linkbutton button" data-options="iconCls:'icon-export',plain:true">导出</a></div></div><div data-options="region:'center',border:true"><table id="tollgateGrd" cy-datagrid="options" cy-querydata="formData" cy-url="data/deviceManage/deviceConfig/qryTollgateRecords.json"></table></div></div><script type="text/javascript">InitPage([],function(e){function t(e,t,i){var a=$("<a  title='编辑' class='button-edit'></a>");a.linkbutton({iconCls:"icon-edit"}),a.attr("cy-click","editDevice('"+t.DEVICE_ID+"')");var o=$("<a  title='删除' class='button-remove'></a>");return o.linkbutton({iconCls:"icon-remove"}).attr("cy-click","deleteDevice('"+t.DEVICE_ID+"')"),$("<span/>").append(a).append("  ").append(o).html()}e.$ajaxRequest({url:"data/deviceManage/deviceConfig/deviceConfigMgr.json",params:{OrgCode:e.UserInfo.OrgCode},success:function(t){""!=t.Error?alert("初始化页面报错,详细："+t.Error):e.initCombobox(t.Result)},fail:function(e){alert(e)}}),$.extend(e,{initCombobox:function(t){e.$("#org").combotree("loadData",t.orgTree),e.$("#road").combobox("loadData",t.road),e.$("#site").combobox("loadData",t.site),e.$("#deviceUseStatus").combobox("loadData",t.dicts[405]),e.$("#contractor").combobox("loadData",t.contractor)},formData:{},changeData:function(e){return e+=1},searchData:function(){e.$search("formData",{},function(e){})},options:{columns:[[{halign:"center",field:"DEVICE_ID",checkbox:!0},{halign:"center",title:"设备编号",field:"DEVICE_NBR",width:100},{halign:"center",title:"设备名称",field:"DEVICE_NAME",width:250},{halign:"center",title:"管辖机构",field:"ORG_NAME",width:150},{halign:"center",title:"所属道路",field:"ROAD_NAME",width:100},{halign:"center",title:"所在点位",field:"SITE_NAME",width:200},{halign:"center",title:"厂家",field:"CONTRACTOR",width:100},{halign:"center",title:"设备型号",field:"DEVICE_MODEL",width:100},{halign:"center",title:"安装时间",field:"INSTALL_DATE",width:100},{halign:"center",title:"使用状态",field:"USE_STATUS",width:80},{halign:"center",title:"操作",field:"opt",width:100,formatter:t}]]},addData:function(t){e.$ajaxRequest({url:"data/deviceManage/deviceConfig/deviceConfigBaseInfo.json",params:{OrgCode:e.UserInfo.OrgCode},success:function(t){""!=t.Error?alert("初始化卡口新增页面报错,详细："+t.Error):(e.$setParam("initData",t.Result),e.$setParam("mode","ADD"),e.$setParam("closeDialog",e.closeTollgateConfig),e.$openDialog("detailDailog",{title:"卡口设备备案",width:900,height:550,href:"tpls/deviceManage/deviceConfig/tollgateConfig.html",onClose:function(){e.$getDialog("detailDailog").dialog("destroy")}}))},fail:function(e){alert(e)}})},closeTollgateConfig:function(){e.$getDialog("detailDailog").dialog("close")},startUse:function(t){var i=e.getCheckedRows();alert("设置选择的这"+i.length+"行记录的使用状态为启用！")},stopUse:function(t){var i=e.getCheckedRows();alert("设置选择的这"+i.length+"行记录的使用状态为停用！")},destroyUse:function(t){var i=e.getCheckedRows();alert("设置选择的这"+i.length+"行记录的使用状态为报废！")},deleteTollgate:function(t){var i=e.getCheckedRows();alert("删除这"+i.length+"行记录！")},getCheckedRows:function(){var t=e.$("#tollgateGrd").datagrid("getChecked");return $.isEmptyObject(t)||0==t.length?void alert("您未选中任何记录"):t},editDevice:function(e){alert(e)},deleteDevice:function(e){alert(e)}})});</script><style>#tollgateConfigMgrDiv .td>input[class^=easyui-]{width:170px}#tollgateConfigMgrDiv .td:nth-child(odd){margin-left:15px}</style>