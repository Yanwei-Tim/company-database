<div id="contractManage" class="easyui-layout"><div data-options="region:'north',border:false"><form cy-form="formData"><div class="searchPanel"><div class="panel_title">查询条件</div><div class="table"><div class="tr"><div class="th">所属机构：</div><div class="td"><select class="easyui-combobox" name="CERTIFICATED_ORG"><option>==请选择==</option></select></div><div class="th">合同类型：</div><div class="td"><select class="easyui-combobox" name="CONTRACT_TYPE"><option>==请选择==</option></select></div><div class="th">承建商：</div><div class="td"><select class="easyui-combobox" name="CONTRACTOR_NAME"><option>==请选择==</option></select></div></div><div class="tr"><div class="th">签署时间：</div><div class="td"><input id="startTime" class="easyui-datebox" name="" style="width:150px"> 到 <input id="endTime" class="easyui-datebox" name="" style="width:150px"></div><div class="td"><a class="easyui-linkbutton button-search" data-options="iconCls:'icon-search'" cy-click="searchData">查询</a></div></div></div></div></form><div class="linkbutton_toolbar"><a class="easyui-linkbutton button-add" data-options="iconCls:'icon-add'" cy-click="addData">新增</a> <a class="easyui-linkbutton button-remove" data-options="iconCls:'icon-remove'" cy-click="removeSomeData">批量删除</a></div></div><div data-options="region:'center',border:true"><table id="contractInfo" cy-datagrid="options" cy-querydata="queryData" cy-url="data/deviceManage/informationManage/contractData.json"></table></div></div><script type="text/javascript">InitPage([],function(t){function e(t,e,i){var a=$("<a title='编辑' class='button-edit' cy-click='editData("+i+")'></a>"),l=$("<a title='删除' class='button-remove' cy-click='removeData("+i+")'></a>");return a.linkbutton({iconCls:"icon-edit"}),l.linkbutton({iconCls:"icon-remove"}),$("<span/>").append(a).append(" ").append(l).html()}t.options={columns:[[{field:"id",checkbox:!0},{title:"合同编号",field:"CONTRACT_NBR",width:80},{title:"合同名称",field:"CONTRACT_NAME",width:100},{title:"合同类型",field:"CONTRACT_TYPE",width:100},{title:"招标编号",field:"BID_NBR",width:80},{title:"承建商",field:"CONTRACTOR_NAME",width:100},{title:"签署时间",field:"CONTRACT_TIME",width:100},{title:"投标联系人",field:"BID_CONTACT_NAME",width:80},{title:"投标联系人电话",field:"BID_CONTACT_TEL",width:120},{title:"售后服务期始",field:"BEGIN_SERVICE_DATE",width:100},{title:"售后服务期至",field:"END_SERVICE_DATE",width:100},{title:"售后服务联系人",field:"SERVICE_PERSON",width:120},{title:"售后服务联系人电话",field:"SERVICE_PERSON_TEL",width:150},{title:"操作",field:"OPERATER",width:100,formatter:e}]]},t.addData=function(){t.$openDialog("addDialog",{title:"新增合同信息",width:600,height:430,href:"tpls/deviceManage/informationManage/contractOperate.html"},!0),t.$setParam("closeSelf",function(){t.$getDialog("addDialog").dialog("close")})},t.editData=function(e){var i=t.$("#contractInfo").datagrid("getData").rows;t.$setParam("newData",{CONTRACT_NBR:i[e].CONTRACT_NBR,CONTRACT_NAME:i[e].CONTRACT_NAME,CONTRACT_TYPE:i[e].CONTRACT_TYPE,BID_NBR:i[e].BID_NBR,CONTRACTOR_NAME:i[e].CONTRACTOR_NAME,CONTRACT_TIME:i[e].CONTRACT_TIME,BID_CONTACT_NAME:i[e].BID_CONTACT_NAME,BID_CONTACT_TEL:i[e].BID_CONTACT_TEL,BEGIN_SERVICE_DATE:i[e].BEGIN_SERVICE_DATE,END_SERVICE_DATE:i[e].END_SERVICE_DATE,SERVICE_PERSON:i[e].SERVICE_PERSON,SERVICE_PERSON_TEL:i[e].SERVICE_PERSON_TEL,REMARK:i[e].REMARK}),t.$openDialog("editDialog",{title:"编辑合同信息",width:600,height:430,href:"tpls/deviceManage/informationManage/contractOperate.html"},!0),t.$setParam("closeSelf",function(){t.$getDialog("editDialog").dialog("close")})},t.removeData=function(t){alert(t)},t.removeSomeData=function(){var t=$("#contractInfo").datagrid("getChecked");return 0==t.length?(alert("请选择需要删除的信息！"),!1):void alert("删除")},t.searchData=function(){t.$search("queryData")},$("#startTime").datebox({onSelect:function(t){var e=new Date;return t>e?(alert("请选择正确的时间！"),$("#startTime").datebox("setValue",""),!1):void 0}}),$("#endTime").datebox({onSelect:function(t){var e=$("#startTime").datebox("getValue");if(null==e||""==e)return alert("请选择开始时间！"),$("#endTime").datebox("setValue",""),!1;var i=new Date(e),a=new Date;return i>t||t>a?(alert("请选择正确的时间！"),$("#endTime").datebox("setValue",""),!1):void 0}})});</script><style type="text/css">#contractManage .th{width:80px;text-align:right}#contractManage .easyui-combobox{width:120px}#contractManage .button-search{margin-left:10px}</style>