<div id="chooseLocation" class="easyui-layout"><div data-options="region:'north',border:false" style="height:195px"><div class="linkbutton_toolbar"><a href="#" class="easyui-linkbutton button-save" cy-click="ok" data-options="iconCls:'icon-save'">确定</a> <a href="#" class="easyui-linkbutton button" cy-click="clear" data-options="iconCls:'icon-clear'">清空</a> <a href="#" class="easyui-linkbutton button-search" cy-click="searchData" data-options="iconCls:'icon-search'">查询</a></div><div class="table"><form id="locationSearchFrom" method="post"><div class="tr"><div class="th">行政区划1：</div><div class="td"><input class="easyui-combotree" style="width:120px" id="districtCode" name="districtCode"></div><div class="th">道路类型：</div><div class="td"><input class="easyui-combobox" id="roadType" name="roadType" style="width:120px" data-options="valueField:'id',textField:'text'"></div><div class="th">道路名称：</div><div class="td"><input class="easyui-combobox" id="roadCode" name="roadCode" style="width:120px" data-options="valueField:'id',textField:'text'"></div></div><div class="tr" style="margin-top:5px"><div class="th">已选点位：</div><div class="td" id="checkLocation" style="padding:5px 10px;height:100px;width:518px;border:solid 1px #ccc;overflow:auto"></div></div></form></div></div><div data-options="region:'center',border:false" style="border-top:#ccc 1px solid"><div id="locationTree" class="easyui-tree" style="margin:5px 20px"></div></div></div><script>InitPage(["setLocationData","currentLocationData","dialog"],function(o){function t(){o.$("#roadType").combobox("loadData",r.T_DIC_ROAD_TYPE),o.$("#roadCode").combobox("loadData",r.T_DIC_ROAD)}function e(t){o.$("#locationTree").tree({data:t,checkbox:!0,onCheck:function(o,t){var t=$(this).tree("getChecked","checked");n.splice(0,n.length);for(var e=0;e<t.length;e++)$(this).tree("isLeaf",t[e].target)&&n.push(t[e]);a()}})}function a(){o.$("#checkLocation").html("");for(var t in n){var e=$("<div>"+n[t].text+"</div>");o.$("#checkLocation").append(e)}}function c(){var t;if(0==n.length){var e=o.$("#locationSearchFrom").getParams(),a=o.$("#districtCode").combotree("getText"),c=o.$("#roadType").combobox("getText"),r=o.$("#roadCode").combobox("getText");""!=a&&(a="行政区划:"+a+";"),""!=c&&(c="道路类型:"+c+";"),""!=r&&(r="道路名称:"+r),e.text=a+c+r,t={formData:e}}else t={checkedData:n,treeData:o.$("#locationTree").tree("options").data};return t}var r,n=[];o.$ajaxRequest({url:"data/passVehicle/chooseLocationInit.json",params:{OrgCode:o.UserInfo.OrgCode},success:function(e){r=e.dicts,t(),o.$("#districtCode").combotree("loadData",e.district_tree)},fail:function(o){alert(o)}}),o.searchData=function(){o.$formSubmit({formId:"#locationSearchFrom",actionUrl:"data/passvehicle/chooseLocationSearch.json",success:function(o){"object"==typeof o&&o.length>0&&e(o)}})},o.ok=function(){o.setLocationData(c()),o.dialog.dialog("close")},o.clear=function(){o.$("#locationSearchFrom").form("clear"),o.$("#locationTree").tree("loadData",{}),n=[],o.$("#checkLocation").html("")}});</script><style>#chooseLocation .th{width:80px;text-align:right}#chooseLocation .td{width:120px}</style>