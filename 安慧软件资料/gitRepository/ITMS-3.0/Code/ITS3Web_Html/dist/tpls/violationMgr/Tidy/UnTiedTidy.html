<div class="divView" id="queryView" style="height:100%"><div class="easyui-layout" style="height:100%;width:100%"><div data-options="region:'north'"><div class="toolbar" style="float:left;width:100%;clear:both"><form id="frmCond" class="searchForm" method="post"><div class="searchPanel"><div class="panel_title">查询条件</div><div class="table"><div class="tr" style="text-align:center"><div class="th">采集单位:</div><div class="td"><input class="easyui-combobox" id="cmbOrgQ" data-options="valueField:'ID',textField:'NAME',panelHeight:'auto'"></div><div class="th">取证设备:</div><div class="td"><input class="easyui-combobox" id="cmbDeviceQ" data-options="valueField:'ID',textField:'NAME',panelHeight:'auto'"></div><div class="th">违法时间:</div><div class="td"><input class="easyui-datebox" type="text" name="VioTimeFrom"></div><div class="th">到</div><div class="td"><input class="easyui-datebox" type="text" name="VioTimeTo"></div><div class="th">速度:</div><div class="td"><input class="easyui-textbox" type="text" name="SpeedFrom"></div><div class="th">到</div><div class="td"><input class="easyui-textbox" type="text" name="SpeedTo"></div></div><div class="tr"><div class="th">记录状态:</div><div class="td"><input class="easyui-combobox" id="cmbStatusQ" name="PlateType" data-options="valueField:'ID',textField:'NAME',panelHeight:'auto'"></div><div class="th">测速类别:</div><div class="td"><input class="easyui-combobox" id="cmbSpeedCollateTypeQ" name="PlateType" data-options="valueField:'ID',textField:'NAME',panelHeight:'auto'"></div><div class="th">号牌号码:</div><div class="td"><input class="easyui-textbox cy-vehNumberbox" name="PlateNbr"></div><div class="th">号牌种类:</div><div class="td"><input class="easyui-combobox" id="cmbPlateTypeQ" name="PlateType" data-options="valueField:'ID',textField:'NAME',panelHeight:'auto'"></div><div class="td" style="width:180px"></div><div class="td"><a href="#" class="easyui-linkbutton button-search" style="width:80px;text-align:right" cy-click="SearchAsync()" iconcls="icon-search ">查询</a></div></div></div></div></form></div></div><div data-options="region:'center'"><table id="tbVio" cy-datagrid="options" cy-querydata="formData" cy-url="data/violationMgr/violation.json"></table></div><div data-options="region:'east'" style="width:250px"><div style="overflow-y:auto;height:auto;width:250px"><img style="width:100%;height:100%" src="themes/default/images/nopic.jpg"> <img style="width:100%;height:100%" src="themes/default/images/nopic.jpg"> <img style="width:100%;height:100%" src="themes/default/images/nopic.jpg"></div></div></div></div><div class="divView" id="detailView" style="height:100%;display:none"><div class="row tr" style="height:450px"><img style="width:49%;height:100%" src="themes/default/images/nopic.jpg"> <img style="width:49%;height:100%" src="themes/default/images/nopic.jpg"></div><div data-options="region:'east'" style="width:100%;height:100%"><form cy-form="VioDetail"><div class="portlet col-5" style="float:right"><div class="portlet-body"><div class="row tr" style="display:none"><input name="VIOLATION_ID" type="text"></div><div class="row tr"><div class="td col-2">号牌号码：</div><div class="td col-4"><input class="inputlabel cy-vehNumberbox" name="PLATE_NBR" type="text" style="width:120px"></div><div class="td col-2">号牌种类：</div><div class="td col-4"><input class="easyui-combobox" id="cmbPlateType" name="PLATE_TYPE" data-options="valueField:'ID',textField:'NAME',panelHeight:'auto'" style="width:120px"></div></div><div class="row tr"><div class="td col-2">号牌颜色：</div><div class="td col-4"><input class="easyui-combobox" id="cmbPlateColor" name="PLATE_COLOR" data-options="valueField:'ID',textField:'NAME',panelHeight:'auto'" style="width:120px"></div><div class="td col-2">发证机关：</div><div class="td col-4" cy-name="VioDetail.VEHICLE_ISSUE_ORG" cy-filter="issueOrgFormat"></div></div><div class="row tr"><label class="td col-2">车辆品牌：</label><div class="td col-4"><input class="inputlabel" name="VEHICLE_BRAND" type="text" readonly="true"></div><label class="td col-2">车身颜色：</label><div class="td col-4" cy-name="VioDetail.VEHICLE_COLOR"></div></div><div class="row tr"><label class="td col-2">使用性质：</label><div class="td col-4" cy-name="VioDetail.VEHICLE_CHARACTER" cy-filter="fmtVEHICLE_CHARACTER"></div><label class="td col-2">车辆类型：</label><div class="td col-4" cy-name="VioDetail.VEHICLE_TYPE" cy-filter="fmtVEHICLE_TYPE"></div></div><div class="row tr" style="display:none"><input name="VIOLATION_ID" type="text"></div></div></div><div class="portlet col-6" style="float:right"><div class="portlet-body"><div class="row tr"><div class="td col-2">违法道路：</div><div class="td col-2" cy-name="VioDetail.ROAD_CODE" cy-filter="roadCodeFormat"></div><div class="td col-3">路口/路段：</div><div class="td col-2"><input class="inputlabel" name="JUNCTION_CODE" type="text" options="formatter:CommonService.JunctionFormat" readonly="true" style="width:100%"></div><div class="td col-1">米数：</div><div class="td col-2"><input class="inputlabel" name="MILEAGE" type="text" readonly="true" style="width:30px">米</div></div><div class="row tr"><div class="td col-2">地点描述：</div><div class="td col-10"><input class="inputlabel" type="text" name="ADDRESS_DESC"></div></div><div class="row tr"><div class="td col-2">违法时间：</div><div class="td col-4" cy-name="VioDetail.VIOLATION_TIME"></div><div class="td col-2">采集单位：</div><div class="td col-4" cy-name="VioDetail.ORG_CODE" cy-filter="orgFormat"></div></div><div class="row tr"><div class="td col-2">违法代码：</div><div class="td col-4"><input class="inputlabel" type="text" name="VIOLATION_CODE"></div><div class="td col-2">罚款金额：</div><div class="td col-4"><input class="inputlabel" type="text" name="VIOLATION_CODE"></div></div><div class="row tr"><div class="td col-2">违法内容：</div><div class="td col-6"><input class="inputlabel" type="text" name="VIOLATION_DESC"></div></div></div></div><div class="row tr" style="margin-left:20px;float:right"><div class="portlet-body"><a href="#" class="easyui-linkbutton" style="width:60px">录入</a> <a href="#" id="btnDiscard" class="easyui-menubutton button" data-options="iconCls:'icon-edit'" style="width:80px">废弃</a><div id="mbtnDiscard" style="width:150px;display:none"><div cy-click="DiscardAsync()">车速不足</div><div cy-click="DiscardAsync()">无号牌</div><div>查无车辆信息</div><div>图片模糊</div><div>遮挡号牌</div><div class="menu-sep"></div><div>套牌车</div><div>假牌车</div><div>军警车</div><div>农用车</div></div><a href="#" class="easyui-linkbutton" cy-click="selectView('queryView')">显示列表</a> <a href="#" class="easyui-linkbutton" style="width:60px">上一条</a> <a href="#" class="easyui-linkbutton" style="width:60px">下一条</a></div></div></form></div></div><script type="text/javascript">InitPage([],function(o){o.plateTypeFormat=function(e,t,i){return o.code2Name(o.SysCodeDic.PlateType,e)},o.orgFormat=function(e,t,i){return o.code2Name(o.SysCodeDic.Org,e)},o.violationTypeFormat=function(e,t,i){return o.code2Name(o.SysCodeDic.ViolationType,e)},o.RoadFormat=function(e,t,i){return o.code2Name(o.SysCodeDic.Road,e)},o.roadCodeFormat=function(e){return o.code2Name(o.SysCodeDic.Road,e)},o.issueOrgFormat=function(e){return o.code2Name(o.SysCodeDic.VehicleIssueOrg,e)},o.fmtVEHICLE_CHARACTER=function(e){return o.code2Name(o.SysCodeDic.VehicleCharacter,e)},o.fmtVEHICLE_TYPE=function(e){return o.code2Name(o.SysCodeDic.VehicleType,e)},o.gridDbClick=function(e,t){o.selectView("detailView")},o.selectView=function(e){o.$(".divView").css("display","none"),o.$("#"+e).css("display","");var t=o.$("#tbVio").datagrid("getSelected");"detailView"==e&&(t?(o.VioDetail=t,o.$updateDom("VioDetail")):console.log("nodata"))},$.extend(o,{load:function(){o.$("#btnDiscard").menubutton({menu:o.$("#mbtnDiscard")});var e="data/violationMgr/sysCode.json";$.getJSON(e,function(e){o.SysCodeDic=e,o.InitPageSysCode()});var e="data/violationMgr/org.json";$.getJSON(e,function(e){o.SysCodeDic.Org=e,$("#cmbOrgQ").combobox("loadData",o.SysCodeDic.Org),$("#cmbOrg").combobox("loadData",o.SysCodeDic.Org)});var e="data/violationMgr/vioAction.json";$.getJSON(e,function(e){o.SysCodeDic.VioAction=e,$("#cmbVioAction").combobox("loadData",o.SysCodeDic.VioAction)});var e="data/violationMgr/road.json";$.getJSON(e,function(e){o.SysCodeDic.Road=e});var e="data/violationMgr/device.json";$.getJSON(e,function(e){o.SysCodeDic.Device=e,$("#cmbDeviceQ").combobox("loadData",o.SysCodeDic.Device)}),o.selectView("queryView"),console.log("loadSuccess!")},enter:function(){console.log("enter")},leave:function(){console.log("leave")},close:function(){console.log("close")},formData:{username:"admin1231312",password:"123456",combo:4,code:1234},options:{columns:[[{field:"id",checkbox:!0},{title:"违法类型",field:"VIOLATION_TYPE",width:10,formatter:o.violationTypeFormat},{title:"号牌号码",field:"PLATE_NBR",width:10},{title:"号牌种类",field:"PLATE_TYPE",width:10,formatter:o.plateTypeFormat},{title:"违法时间",field:"VIOLATION_TIME",width:10},{title:"违法地点",field:"ADDRESS_DESC",width:10},{title:"违法行为描述",field:"VIOLATION_DESC",width:10},{title:"采集机构",field:"ORG_CODE",width:10,formatter:o.orgFormat}]],singleSelect:!0,method:"get",fitColumns:!0,striped:!0,selectOnCheck:!1,onDblClickRow:o.gridDbClick,pagination:!0},VioDetail:{},saveToLocal:function(){},SearchAsync:function(){o.$search("formData")},SaveAsync:function(){},SysCodeDic:{PlateType:null,PlateColor:null,ViolationType:null,EnforcementCategory:null,Org:null,Road:null,Device:null,User:null,VioAction:null,District:null,VehicleType:null,VehicleCharacter:null,VehicleIssueOrg:null},InitPageSysCode:function(){$("#cmbPlateTypeQ").combobox("loadData",o.SysCodeDic.PlateType),$("#cmbPlateType").combobox("loadData",o.SysCodeDic.PlateType),$("#cmbViolationTypeQ").combobox("loadData",o.SysCodeDic.ViolationType),$("#cmbEnforcementCategoryQ").combobox("loadData",o.SysCodeDic.EnforcementCategory),$("#cmbDistrict").combobox("loadData",o.SysCodeDic.District),$("#cmbVehicleIssueOrg").combobox("loadData",o.SysCodeDic.VehicleIssueOrg),$("#cmbVehicleType").combobox("loadData",o.SysCodeDic.VehicleType),$("#cmbVehicleCharacter").combobox("loadData",o.SysCodeDic.VehicleCharacter),$("#cmbPlateColor").combobox("loadData",o.SysCodeDic.PlateColor)},code2Name:function(o,e){if(null==o)return e+"无法转换";for(var t=0;t<o.length;t++)if(o[t].ID==e)return o[t].NAME},DiscardAsync:function(o){alert("Discard,type"+o)}})});</script><link rel="stylesheet" href="views/Violation/assets/css/gridCell.css"><link rel="stylesheet" href="views/Violation/assets/css/portlet.css"><link rel="stylesheet" href="views/Violation/assets/css/form.css">