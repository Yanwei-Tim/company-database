<div id="importantVehicle" class="easyui-layout"><div data-options="region:'north',border:false,height:110" style="border-bottom:solid 1px #ddd"><form cy-form="searchParams"><div class="searchPanel"><div class="panel_title">查询条件</div><div class="table"><div class="tr"><div class="th" style="width:100px">车辆使用性质：</div><div class="td"><input id="useType" class="easyui-combobox" name="useType" style="width:110px"></div><div class="th">号牌号码：</div><div class="td"><input class="cy-vehNumberbox" name="plateNumber" style="width:110px"></div><div class="th">号牌种类：</div><div class="td"><input id="plateType" class="easyui-combobox" name="plateType" style="width:110px"></div><div class="th" style="width:80px"><a class="easyui-linkbutton button-search" data-options="iconCls:'icon-search'" cy-click="search">查找</a></div></div></div></div></form><div class="linkbutton_toolbar"><a class="easyui-linkbutton button-add" data-options="iconCls:'icon-add'" cy-click="addVeh">添加</a> <a class="easyui-linkbutton button-remove" data-options="iconCls:'icon-remove'">删除</a> <a class="easyui-linkbutton button" data-options="iconCls:'icon-import'">导入</a></div></div><div data-options="region:'center',border:false"><table id="datagrid" cy-datagrid="options" cy-querydata="searchParams" cy-url="data/passvehicle/vehManagerData.json"></table></div></div><script type="text/javascript">InitPage([],function(t){function e(t){return t?o("001",t):void 0}function i(t){return t?o("002",t):void 0}function a(t){return t?o("003",t):void 0}function r(t){return n(c,t)}function n(t,e){for(var i in c){var a=c[i];if(a.id==e)return a.text;if(a.children.length>0)return n(a.children,e)}}function o(t,e){var i=d[t];for(var a in i){var r=i[a];if(r.value==e)return r.text}}function l(t,e,i){var a=$("<a title='修改' class='button-edit' cy-click='editVeh("+i+")'></a>"),r=$("<a title='删除' class='button-remove' cy-click='removeVeh("+i+")'></a>");return a.linkbutton({iconCls:"icon-edit"}),r.linkbutton({iconCls:"icon-remove"}),$("<span/>").append(a).append("  ").append(r).html()}var d,c;$.extend(t,{options:{columns:[[{field:"id",checkbox:!0},{field:"plateNumber",title:"号牌号码",width:100},{field:"plateType",title:"号牌种类",width:100,formatter:e},{field:"useType",title:"使用性质",width:100,formatter:i},{field:"vehType",title:"车辆类型",width:100,formatter:a},{field:"vehBrand",title:"车辆品牌",width:100,formatter:t.$getBrandNameByCode},{field:"vehHost",title:"车主",width:100},{field:"phoneNumber",title:"车主电话",width:100},{field:"validateDate",title:"有效期",width:100},{field:"scrapDate",title:"轻质报废期止",width:100},{field:"operate",title:"操作",width:100,formatter:l}]],onDblClickRow:function(n,o){t.$setParam("vehData",o),t.$setParam("formatters",{plateType:e,useType:i,vehType:a,district:r}),t.$openDialog("addDialog",{title:"车辆详细信息",width:700,height:345,href:"tpls/passVehicle/vehicleManager/importantVehicleView.html"})}},load:function(){t.$ajaxRequest({url:"data/passvehicle/dict.json",success:function(e){d=e.dicts,c=e.district,t.$("#useType").combobox("loadData",d["001"]),t.$("#plateType").combobox("loadData",d["002"])},fail:function(t){$.massager.alert(t)}})},search:function(){t.$search("searchParams")},addVeh:function(){t.$setParam("dicts",d),t.$setParam("district",c),t.$openDialog("addDialog",{title:"添加车辆信息",width:700,height:345,href:"tpls/passVehicle/vehicleManager/importantVehicleInput.html"})},editVeh:function(e){var i=t.$("#datagrid").datagrid("getData").rows[e];t.$setParam("dicts",d),t.$setParam("district",c),t.$setParam("formData",i),t.$openDialog("addDialog",{title:"编辑车辆信息",width:700,height:345,href:"tpls/passVehicle/vehicleManager/importantVehicleInput.html"})},removeVeh:function(e){t.$("#datagrid").datagrid("getData").rows[e];$.messager.confirm("提示","是否删除该记录?",function(t){})}})});</script><style type="text/css">#importantVehicle .th{width:70px;text-align:right}#importantVehicle .td{width:120px}</style>